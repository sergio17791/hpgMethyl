<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:components="http://java.sun.com/jsf/composite/components"
                template="../../WEB-INF/templates/mainTemplate.xhtml">
    <ui:define name="content">
    	<f:metadata>
  			<f:viewParam name="id" value="#{analysisDetail.id}"/>
			<f:viewAction action="#{analysisDetail.loadAnalysisDetail}"/>
		</f:metadata>  
		<b:form id="analysisDetailForm">  	
         	<b:row>
         		<b:column col-md="6">
            		<legend><h:outputText value="#{msg['analysis.detail.legend']}"/></legend>      
            	</b:column>                 
	        </b:row>
         	<b:panel>
         		<b:row>
         			<b:column col-md="6">
						<b:inputText id ="analysisStatus" 
	        				 		 value ="#{msg['analysis.attribute.status.' += analysisBean.status]}"
		               	 			 styleClass ="form-control-plaintext"
		                 			 label ="#{msg['analysis.attribute.status']}" 
			             		 	 disabled="true"/>
					</b:column>	
					<b:column col-md="6">
						<b:inputText id ="analysisNumber" 
	        				 		 value ="#{analysisBean.number}"
		               	 			 styleClass ="form-control-plaintext"
		                 			 label ="#{msg['analysis.attribute.number']}" 
		                 			 a:type  ="number"
			             		 	 disabled="true"/>
					</b:column>	              											  
            	</b:row>
         	</b:panel>
         </b:form>
         <b:form id="analysisParametersForm">
         	<b:row>         	
         		<b:column col-md="6">
            		<legend><h:outputText value="#{msg['analysis.detail.parametersLegend']}"/></legend>      
             	</b:column>                 
         	</b:row>
            <b:panel contentDisabled="#{analysisBean.status ne 'CREATED'}">
            	 <ui:decorate template="../../WEB-INF/templates/analysisRequestTemplate.xhtml"/>
            	 <b:row rendered="#{analysisBean.status eq 'CREATED'}">
                	<b:column col-md="6">
	                	<b:commandButton id="resetAnalysisButton"
		                                 value="#{msg['general.reset']}" 
		                                 type="reset"
		                                 look="light"
		                                 styleClass="btn-block"/>
                	</b:column>
                	<b:column col-md="6">
	                	<b:commandButton id="updateAnalysisParametersButton"
		                                 binding="#{analysisDetail.updateAnalysisParametersComponent}"
		                                 value="#{msg['general.update']}" 
		                                 action="#{analysisDetail.updateAnalysisParameters()}"
		                                 look="primary"
		                                 styleClass="btn-block"/>     
                	</b:column>                    	
                </b:row>                 
                <b:row style="margin-top: 10px">             
                	<b:column col-md="12">
	                	<h:message for="updateAnalysisParametersButton" infoClass="alert alert-success errorMessage" errorClass="alert alert-danger errorMessage"/>
                	</b:column>
                </b:row>
            </b:panel>                                          
        </b:form>
        <h:panelGroup rendered="#{analysisBean.status eq 'CREATED'}">
        	<b:form id="updateInputFileForm" enctype="multipart/form-data">  	
         		<b:row>
         			<b:column col-md="6">
            			<legend><h:outputText value="#{msg['analysis.detail.updateInputFileLegend']}"/></legend>      
            		</b:column>                 
	        	</b:row>
         		<b:panel>
         			<h:panelGroup id="updateInputFileSection">
         				<b:row>         				         				
            				<b:column col-md="6" rendered="#{analysisDetail.newInputReadFile == true}">
                				<h:outputLabel styleClass="control-label" for="newInputReadFile">#{msg['analysis.attribute.inputReadFile']} *</h:outputLabel>
                				<h:inputFile id="newInputReadFile" 
  	                            	     	value="#{analysisDetail.inputReadFile}" 
       		                        	 	styleClass="form-control"
                                     		required="true"
	                 	                 	requiredMessage="#{msg['error.form.requiredField']}">
									<f:validator validatorId="fileValidator"/>
    	                    	</h:inputFile>
        	        			<h:message for="newInputReadFile" styleClass="alert alert-danger errorMessageWithTopLabel"/>
            	    		</b:column>
                			<b:column col-md="6" rendered="#{analysisDetail.newInputReadFile == false}">
               					<b:selectOneMenu id ="selectNewInputReadFile" 
	               							 	 value="#{analysisDetail.selectedInputReadFile}"
		                    		 	 	 	 styleClass="form-control"
		                        		   	 	 label="#{msg['analysis.attribute.inputReadFile']}" 
			                       			 	 required="true"
		                           	 			 requiredMessage="#{msg['error.form.requiredField']}">  
			                		<f:selectItem noSelectionOption="true"/>  
			             			<f:selectItems value="#{analysisDetail.userFiles}" 
			                   	   				   var="userFile" 
		    	               	   				   itemValue="#{userFile}" 
		        	           	   				   itemLabel="#{userFile.fileName}"/>                        
	               				</b:selectOneMenu>
               					<h:message for="selectNewInputReadFile" styleClass="alert alert-danger errorMessageWithTopLabel"/>
	               			</b:column>
    	            		<b:column col-md="6" styleClass="booleanColumn">
								<b:selectBooleanCheckbox value="#{analysisDetail.newInputReadFile}" 
											  			 caption="#{msg['general.newFile']}">
									<f:ajax render="updateInputFileSection" /> 
								</b:selectBooleanCheckbox>										  			 
							</b:column>
						</b:row>
						<b:row style="margin-top: 10px"> 
							<b:column col-md="6">
	                			<b:commandButton id="updateInputFileButton"
		                        		         binding="#{analysisDetail.updateInputFileComponent}"
		                                		 value="#{msg['general.update']}" 
				                                 action="#{analysisDetail.updateInputFile()}"
				                                 look="primary"
		        		                         styleClass="btn-block"/>     
                			</b:column> 
                			<b:column col-md="6">
	                			<h:message for="updateInputFileButton" infoClass="alert alert-success errorMessage" errorClass="alert alert-danger errorMessage"/>
                			</b:column>
						</b:row>
            		</h:panelGroup>
            	</b:panel>                                          
        	</b:form>
        </h:panelGroup>        
    </ui:define>
</ui:composition>