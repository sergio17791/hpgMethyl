<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:components="http://java.sun.com/jsf/composite/components"
                template="../WEB-INF/templates/mainTemplate.xhtml">
    <ui:define name="content">
        <b:form id="analysisForm" enctype="multipart/form-data">
            <b:row>
                <b:column col-md="6">
                    <legend><h:outputText value="#{msg['analysis.legend']}"/></legend>      
                </b:column>                 
            </b:row>
            <b:panel>
            	<fieldset>
            		<b:row>
                		<components:inputTextWithErrorMessage inputId="identifier"
                											  value="#{analysis.identifier}"
                											  label="#{msg['analysis.identifier']}"
                											  maxlength="60"
                											  required="true" 
                											  focus="true"/>                			
                		<b:column col-md="6">
                			<h:outputLabel styleClass="control-label" for="inputReadFile">#{msg['analysis.inputReadFile']}:</h:outputLabel>
                			<h:inputFile id="inputReadFile" 
                                         value="#{analysis.inputReadFile}" 
                                         styleClass="form-control"
                                         required="true"
                                         requiredMessage="#{msg['error.form.requiredField']}">
                            </h:inputFile>
                			<h:message for="inputReadFile" styleClass="alert alert-danger errorMessageWithTopLabel"/>
                		</b:column>
                	</b:row>
                	<b:row>
						<b:column col-md="4">
							<b:selectBooleanCheckbox id="writeMethylationContext"
							  				 		 value="#{analysis.writeMethylationContext}" 
													 caption="#{msg['analysis.writeMethylationContext']}"/>
							<h:message for="writeMethylationContext" styleClass="alert alert-danger errorMessageWithTopLabel"/>
						</b:column>
						<b:column col-md="4">
							<b:selectBooleanCheckbox id="readBatchSize"
							  				 		 value="#{analysis.readBatchSize}" 
													 caption="#{msg['analysis.readBatchSize']}"/>
							<h:message for="readBatchSize" styleClass="alert alert-danger errorMessageWithTopLabel"/>
						</b:column>
						<b:column col-md="4">
							<b:selectBooleanCheckbox id="writeBatchSize"
							  				 		 value="#{analysis.writeBatchSize}" 
													 caption="#{msg['analysis.writeBatchSize']}"/>
							<h:message for="writeBatchSize" styleClass="alert alert-danger errorMessageWithTopLabel"/>
						</b:column>
					</b:row>
                	<b:row>
                		<b:column col-md="6">
                			<b:selectOneMenu id ="pairedMode" 
	                					 	 value="#{analysis.pairedMode}"
		                            	 	 styleClass="form-control"
		                                 	 label="#{msg['analysis.pairedMode']}" 
			                             	 required="true" 
		    	                         	 requiredMessage="#{msg['error.form.requiredField']}">    
		    	            	<f:selectItem itemValue="0" itemLabel="#{msg['analysis.singleEndMode']}"/>
    							<f:selectItem itemValue="1" itemLabel="#{msg['analysis.pairedEndMode']}"/>
    							<f:ajax render="pairedEndModeSection" /> 
    							<f:ajax render="mappedReadFilteringSection" />                        
	                	    </b:selectOneMenu>
                			<h:message for="pairedMode" styleClass="alert alert-danger errorMessageWithTopLabel"/>
                		</b:column>
                	</b:row>
                </fieldset>
                <h:panelGroup id="pairedEndModeSection">
                	<h:panelGroup rendered="#{analysis.pairedMode eq '1'}">
						<fieldset>
							<legend><h4><h:outputText value="#{msg['analysis.pairedEndModeLegend']}"/></h4></legend>							
							<h:outputText value="#{msg['analysis.pairedEndModeText']}"/>
							<b:row style="margin-top: 10px">
                				<b:column col-md="4">
                					<h:outputLabel styleClass="control-label" for="pairedEndModeFile">#{msg['analysis.pairedEndModeFile']}:</h:outputLabel>
                					<h:inputFile id="pairedEndModeFile" 
                                         	 	value="#{analysis.pairedEndModeFile}" 
                                         	 	styleClass="form-control"
                                         	 	required="#{analysis.pairedMode eq '1'}"
                                         	 	requiredMessage="#{msg['error.form.requiredField']}">
                            		</h:inputFile>
                					<h:message for="pairedEndModeFile" styleClass="alert alert-danger errorMessageWithTopLabel"/>
                				</b:column>
                				<components:inputTextWithErrorMessage inputId="pairedMaxDistance"
                											  value="#{analysis.pairedMaxDistance}"
                											  label="#{msg['analysis.pairedMaxDistance']}"
                											  type="number"
                											  required="false"
                											  colMdSize="4"/>
								<components:inputTextWithErrorMessage inputId="pairedMinDistance"
                											  value="#{analysis.pairedMinDistance}"
                											  label="#{msg['analysis.pairedMinDistance']}"
                											  type="number"
                											  required="false"
                											  colMdSize="4"/>                											  
                			</b:row>
                		</fieldset>	
					</h:panelGroup>
				</h:panelGroup>                 	            					
                <fieldset>
					<legend><h4><h:outputText value="#{msg['analysis.smithWatermanLegend']}"/></h4></legend>
					<h:outputText value="#{msg['analysis.smithWatermanText']}"/>
					<b:row style="margin-top: 10px">
						<components:inputTextWithErrorMessage inputId="swaMinimunScore"
                											  value="#{analysis.swaMinimunScore}"
                											  label="#{msg['analysis.swaMinimunScore']}"
                											  type="number"
                											  colMdSize="4"/> 
						<components:inputTextWithErrorMessage inputId="swaMatchScore"
                											  value="#{analysis.swaMatchScore}"
                											  label="#{msg['analysis.swaMatchScore']}"
                											  type="number"
                											  colMdSize="4"/>
						<components:inputTextWithErrorMessage inputId="swaMismatchScore"
                											  value="#{analysis.swaMismatchScore}"
                											  label="#{msg['analysis.swaMismatchScore']}"
                											  type="number"
                											  colMdSize="4"/>                											                   											   
                	</b:row>
                	<b:row>
                		<components:inputTextWithErrorMessage inputId="swaGapOpen"
                											  value="#{analysis.swaGapOpen}"
                											  label="#{msg['analysis.swaGapOpen']}"
                											  type="number"
                											  colMdSize="4"
                											  colOffsetMd="2"/>
						<components:inputTextWithErrorMessage inputId="swaGapExtend"
                											  value="#{analysis.swaGapExtend}"
                											  label="#{msg['analysis.swaGapExtend']}"
                											  type="number"
                											  colMdSize="4"/>                											  
                	</b:row>
                </fieldset>
                <fieldset>
					<legend><h4><h:outputText value="#{msg['analysis.seedingAndCalStagesParametersLegend']}"/></h4></legend>
					<h:outputText value="#{msg['analysis.seedingAndCalStagesParametersText']}"/>
					<b:row style="margin-top: 10px">
						<components:inputTextWithErrorMessage inputId="calFlankSize"
                											  value="#{analysis.calFlankSize}"
                											  label="#{msg['analysis.calFlankSize']}"
                											  type="number"
                											  colMdSize="4"/> 
						<components:inputTextWithErrorMessage inputId="minimumCalSize"
                											  value="#{analysis.minimumCalSize}"
                											  label="#{msg['analysis.minimumCalSize']}"
                											  type="number"
                											  colMdSize="4"/>
						<components:inputTextWithErrorMessage inputId="calUmbralLengthFactor"
                											  value="#{analysis.calUmbralLengthFactor}"
                											  label="#{msg['analysis.calUmbralLengthFactor']}"
                											  type="number"
                											  colMdSize="4"/>                											                   											   
                	</b:row>
                	<b:row>
                		<components:inputTextWithErrorMessage inputId="maximumBetweenSeeds"
                											  value="#{analysis.maximumBetweenSeeds}"
                											  label="#{msg['analysis.maximumBetweenSeeds']}"
                											  type="number"
                											  colMdSize="4"/>
						<components:inputTextWithErrorMessage inputId="maximumSeedSize"
                											  value="#{analysis.maximumSeedSize}"
                											  label="#{msg['analysis.maximumSeedSize']}"
                											  type="number"
                											  colMdSize="4"/>
						<components:inputTextWithErrorMessage inputId="minimumSeedSize"
                											  value="#{analysis.minimumSeedSize}"
                											  label="#{msg['analysis.minimumSeedSize']}"
                											  type="number"
                											  colMdSize="4"/>                											                											  
                	</b:row>
                	<b:row>
                		<components:inputTextWithErrorMessage inputId="numberSeedsPerRead"
                											  value="#{analysis.numberSeedsPerRead}"
                											  label="#{msg['analysis.numberSeedsPerRead']}"
                											  type="number"
                											  colMdSize="4"/>
                		<components:inputTextWithErrorMessage inputId="minimumNumberSeeds"
                											  value="#{analysis.minimumNumberSeeds}"
                											  label="#{msg['analysis.minimumNumberSeeds']}"
                											  type="number"
                											  colMdSize="4"/>                											  
						<components:inputTextWithErrorMessage inputId="readMinimumDiscardLength"
                											  value="#{analysis.readMinimumDiscardLength}"
                											  label="#{msg['analysis.readMinimumDiscardLength']}"
                											  type="number"
                											  colMdSize="4"/>                											                											  
                	</b:row>
                	<b:row>
                		<components:inputTextWithErrorMessage inputId="readMaximumInnerGap"
                											  value="#{analysis.readMaximumInnerGap}"
                											  label="#{msg['analysis.readMaximumInnerGap']}"
                											  type="number"
                											  colMdSize="4"/>
                		<components:inputTextWithErrorMessage inputId="filterReadMappings"
                											  value="#{analysis.filterReadMappings}"
                											  label="#{msg['analysis.filterReadMappings']}"
                											  type="number"
                											  colMdSize="4"/>
						<components:inputTextWithErrorMessage inputId="filterSeedMappings"
                											  value="#{analysis.filterSeedMappings}"
                											  label="#{msg['analysis.filterSeedMappings']}"
                											  type="number"
                											  colMdSize="4"/>            											                											  
                	</b:row>
                </fieldset>
                 <h:panelGroup id="mappedReadFilteringSection">
                	<h:panelGroup rendered="#{analysis.pairedMode eq '0'}">
                		<fieldset>
							<legend><h4><h:outputText value="#{msg['analysis.mappedReadFilteringLegend']}"/></h4></legend>
							<h:outputText value="#{msg['analysis.mappedReadFilteringText']}"/>
							<b:row>
								<b:column col-md="4">
									<b:selectBooleanCheckbox id="reportAll"
													 		value="#{analysis.reportAll}" 
													 		caption="#{msg['analysis.reportAll']}"/>
									<h:message for="reportAll" styleClass="alert alert-danger errorMessageWithTopLabel"/>
								</b:column>
								<b:column col-md="8">
									<b:selectBooleanCheckbox id="reportBest"
													 		value="#{analysis.reportBest}" 
													 		caption="#{msg['analysis.reportBest']}"/>
									<h:message for="reportBest" styleClass="alert alert-danger errorMessageWithTopLabel"/>
								</b:column>
							</b:row>
							<b:row>
		                		<components:inputTextWithErrorMessage inputId="reportNBest"
                											  		value="#{analysis.reportNBest}"
                											  		label="#{msg['analysis.reportNBest']}"
                											  		type="number"
                											  		colMdSize="6"/>
								<components:inputTextWithErrorMessage inputId="reportNHits"
                											  		value="#{analysis.reportNHits}"
                											  		label="#{msg['analysis.reportNHits']}"
                											  		type="number"
                											  		colMdSize="6"/>                											  
                			</b:row>                											
						</fieldset> 	
					</h:panelGroup>
				</h:panelGroup> 
                <b:row>
                	<b:column col-md="6">
	                	<b:commandButton id="resetAnalysisButton"
		                                 value="#{msg['analysis.reset']}" 
		                                 type="reset"
		                                 look="light"
		                                 styleClass="btn-block"/>
                	</b:column>
                	<b:column col-md="6">
	                	<b:commandButton id="sendAnalysisButton"
		                                 binding="#{analysis.sendAnalysisComponent}"
		                                 value="#{msg['analysis.send']}" 
		                                 action="#{analysis.sendAnalysis()}"
		                                 look="primary"
		                                 styleClass="btn-block"/>
                	</b:column>                    	
                </b:row>
                <b:row style="margin-top: 10px">             
                	<b:column col-md="12">
	                	<h:message for="sendAnalysisButton" infoClass="alert alert-success errorMessage" errorClass="alert alert-danger errorMessage"/>
                	</b:column>
                </b:row>               	  
            </b:panel>                                          
        </b:form>
    </ui:define>
</ui:composition>