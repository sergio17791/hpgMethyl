<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:components="http://java.sun.com/jsf/composite/components"
                template="../WEB-INF/templates/mainTemplate.xhtml">
    <ui:define name="content">
        <b:form id="analysisForm" enctype="multipart/form-data">
            <b:row>
                <b:column col-md="6">
                    <legend><h:outputText value="#{msg['analysis.legend']}"/></legend>      
                </b:column>                 
            </b:row>
            <b:panel>
            	<fieldset>
            		<b:row>
                		<components:inputTextWithErrorMessage inputId="identifier"
                											  value="#{analysis.identifier}"
                											  label="#{msg['analysis.identifier']}"
                											  maxlength="60"
                											  required="true" 
                											  focus="true"/>                			
                		<b:column col-md="6">
                			<h:outputLabel styleClass="control-label" for="inputReadFile">#{msg['analysis.inputReadFile']}:</h:outputLabel>
                			<h:inputFile id="inputReadFile" 
                                         value="#{analysis.inputReadFile}" 
                                         styleClass="form-control"
                                         required="true"
                                         requiredMessage="#{msg['error.form.requiredField']}">
                            </h:inputFile>
                			<h:message for="inputReadFile" styleClass="alert alert-danger errorMessageWithTopLabel"/>
                		</b:column>
                	</b:row>
                	<b:row>
                		<b:column col-md="6">
                			<b:selectOneMenu id ="pairedMode" 
	                					 	 value="#{analysis.pairedMode}"
		                            	 	 styleClass="form-control"
		                                 	 label="#{msg['analysis.pairedMode']}" 
			                             	 required="true" 
		    	                         	 requiredMessage="#{msg['error.form.requiredField']}">    
		    	            	<f:selectItem itemValue="0" itemLabel="#{msg['analysis.singleEndMode']}"/>
    							<f:selectItem itemValue="1" itemLabel="#{msg['analysis.pairedEndMode']}"/>
    							<f:ajax render="pairedEndModeSection" />                        
	                	    </b:selectOneMenu>
                			<h:message for="pairedMode" styleClass="alert alert-danger errorMessageWithTopLabel"/>
                		</b:column>
                	</b:row>
                	<h:panelGroup id="pairedEndModeSection">
                		<h:panelGroup rendered="#{analysis.pairedMode eq '1'}">
							<fieldset>
								<legend><h4><h:outputText value="#{msg['analysis.pairedEndModeLegend']}"/></h4></legend>
							</fieldset>
							<h:outputText value="#{msg['analysis.pairedEndModeText']}"/>
							<b:row style="margin-top: 10px">
                				<b:column col-md="4">
                					<h:outputLabel styleClass="control-label" for="pairedEndModeFile">#{msg['analysis.pairedEndModeFile']}:</h:outputLabel>
                					<h:inputFile id="pairedEndModeFile" 
                                         	 	value="#{analysis.pairedEndModeFile}" 
                                         	 	styleClass="form-control"
                                         	 	required="#{analysis.pairedMode eq '1'}"
                                         	 	requiredMessage="#{msg['error.form.requiredField']}">
                            		</h:inputFile>
                					<h:message for="pairedEndModeFile" styleClass="alert alert-danger errorMessageWithTopLabel"/>
                				</b:column>
                				<components:inputTextWithErrorMessage inputId="pairedMaxDistance"
                											  value="#{analysis.pairedMaxDistance}"
                											  label="#{msg['analysis.pairedMaxDistance']}"
                											  type="number"
                											  required="false"
                											  colMdSize="4"/>
								<components:inputTextWithErrorMessage inputId="pairedMinDistance"
                											  value="#{analysis.pairedMinDistance}"
                											  label="#{msg['analysis.pairedMinDistance']}"
                											  type="number"
                											  required="false"
                											  colMdSize="4"/>                											  
                			</b:row>	
						</h:panelGroup>
					</h:panelGroup>                 	            					
                    <fieldset>
						<legend><h4><h:outputText value="#{msg['analysis.smithWatermanLegend']}"/></h4></legend>
					</fieldset>
					<h:outputText value="#{msg['analysis.smithWatermanText']}"/>
					<b:row style="margin-top: 10px">
						<components:inputTextWithErrorMessage inputId="swaMinimunScore"
                											  value="#{analysis.swaMinimunScore}"
                											  label="#{msg['analysis.swaMinimunScore']}"
                											  type="number"
                											  required="true"
                											  colMdSize="4"/> 
						<components:inputTextWithErrorMessage inputId="swaMatchScore"
                											  value="#{analysis.swaMatchScore}"
                											  label="#{msg['analysis.swaMatchScore']}"
                											  type="number"
                											  required="true"
                											  colMdSize="4"/>
						<components:inputTextWithErrorMessage inputId="swaMismatchScore"
                											  value="#{analysis.swaMismatchScore}"
                											  label="#{msg['analysis.swaMismatchScore']}"
                											  type="number"
                											  required="true"
                											  colMdSize="4"/>                											                   											   
                	</b:row>
                	<b:row>
                		<components:inputTextWithErrorMessage inputId="swaGapOpen"
                											  value="#{analysis.swaGapOpen}"
                											  label="#{msg['analysis.swaGapOpen']}"
                											  type="number"
                											  required="true"
                											  colMdSize="4"
                											  colOffsetMd="2"/>
						<components:inputTextWithErrorMessage inputId="swaGapExtend"
                											  value="#{analysis.swaGapExtend}"
                											  label="#{msg['analysis.swaGapExtend']}"
                											  type="number"
                											  required="true"
                											  colMdSize="4"/>                											  
                	</b:row>
                	<b:row>
                    	<b:column col-md="6">
	                		<b:commandButton id="sendAnalysisButton"
		                                     binding="#{analysis.sendAnalysisComponent}"
		                                     value="#{msg['analysis.send']}" 
		                                     action="#{analysis.sendAnalysis()}"
		                                     look="primary"
		                                     styleClass="btn-block"/>
                		</b:column>
                		<b:column col-md="6">
	                		<h:message for="sendAnalysisButton" styleClass="alert alert-danger errorMessage"/>
                		</b:column>                    	
                    </b:row>  
            	</fieldset>      
            </b:panel>                                          
        </b:form>
    </ui:define>
</ui:composition>